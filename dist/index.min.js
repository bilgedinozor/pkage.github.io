function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),WorldDriver=function(){function t(){_classCallCheck(this,t),this.height=$(document).height(),this.width=$(document).width(),this.engine=Matter.Engine.create({element:document.getElementById("physics")}),this.render=Matter.Render.create({element:document.getElementById("physics"),engine:this.engine,options:{height:this.height,width:this.width,element:document.getElementById("physics")}}),this.max_body_count=this.height>this.width?50:200,this.initialize_bounds(),this.mouse_constraint=Matter.MouseConstraint.create(this.engine,{element:this.render.canvas}),Matter.World.add(this.engine.world,this.mouse_constraint),this.render.mouse=this.mouse_constraint.mouse,$("window").resize($.proxy(this.on_window_resize,this)),this.run_simulation()}return _createClass(t,[{key:"create_vector",value:function(t,e,i){return t=void 0===t?1:t,e=void 0===e?t:e,i&&(t=Math.random()>.5?t:-1*t,e=Math.random()>.5?e:-1*e),{x:Math.random()*t,y:Math.random()*e}}},{key:"set_opts",value:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}},{key:"initialize_bounds",value:function(){for(var t={isStatic:!0,visible:!1,render:{lineWidth:1}},e=Matter.Bodies.rectangle(-24,this.height/2,50,this.height,t),i=Matter.Bodies.rectangle(this.width+24,this.height/2,50,this.height,t),n=Matter.Bodies.rectangle(this.width/2,-24,this.width,50,t),h=Matter.Bodies.rectangle(this.width/2,this.height+24,this.width,50,t),r=[e,i,n,h],s=0;4>s;s++)Matter.Body.set(r[s],t);Matter.World.add(this.engine.world,r)}},{key:"create_projectile",value:function(){var t=Math.random()>.95?Matter.Bodies.rectangle(this.width/2,this.height/2,40+80*Math.random(),40+80*Math.random()):Matter.Bodies.circle(this.width/2,this.height/2,10+20*Math.random());if(floc=this.create_vector(this.height/2,this.width/2),floc.x+=this.width/4,floc.y+=this.height/4,Math.random()<.05){var e=Matter.Body.nextGroup(!0),i={friction:1e-5,collisionFilter:{group:e},render:{visible:!1}};t=Matter.Composites.softBody(this.width/2,this.height/2,3,3,5,5,!0,8,i,{stiffness:.9})}else Matter.Body.applyForce(t,floc,this.create_vector(.01,.01,!0));Matter.World.add(this.engine.world,[t]),this.engine.world.bodies.length<this.max_body_count&&setTimeout($.proxy(this.create_projectile,this),250)}},{key:"run_simulation",value:function(){Matter.Engine.run(this.engine),Matter.Render.run(this.render)}},{key:"on_window_resize",value:function(){Matter.Engine.clear(this.engine),this.height=$(document).height(),this.width=$(document).width(),this.render.options.height=this.height,this.render.options.width=this.width,this.initialize_bounds()}}]),t}(),wd=new WorldDriver;wd.create_projectile();